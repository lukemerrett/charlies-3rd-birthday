<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Charlie!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            overflow-x: hidden;
            background: linear-gradient(180deg, #4FC3F7 0%, #81D4FA 40%, #B3E5FC 70%, #E1F5FE 100%);
            background-attachment: fixed;
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Comic Neue', cursive, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            padding-bottom: 60px;
        }

        /* ---- CLOUDS ---- */
        .cloud {
            position: fixed;
            background: white;
            border-radius: 50%;
            opacity: 0.85;
            z-index: 0;
        }

        .cloud::before,
        .cloud::after {
            content: '';
            position: absolute;
            background: white;
            border-radius: 50%;
        }

        .cloud-1 {
            width: 120px;
            height: 50px;
            top: 6%;
            animation: float-cloud 25s linear infinite;
        }
        .cloud-1::before { width: 60px; height: 60px; top: -30px; left: 20px; }
        .cloud-1::after  { width: 80px; height: 50px; top: -20px; left: 50px; }

        .cloud-2 {
            width: 150px;
            height: 55px;
            top: 14%;
            animation: float-cloud 35s linear infinite;
            animation-delay: -12s;
        }
        .cloud-2::before { width: 70px; height: 70px; top: -35px; left: 25px; }
        .cloud-2::after  { width: 90px; height: 55px; top: -25px; left: 60px; }

        .cloud-3 {
            width: 100px;
            height: 40px;
            top: 22%;
            animation: float-cloud 30s linear infinite;
            animation-delay: -22s;
        }
        .cloud-3::before { width: 50px; height: 50px; top: -25px; left: 15px; }
        .cloud-3::after  { width: 65px; height: 40px; top: -18px; left: 40px; }

        @keyframes float-cloud {
            0%   { left: -200px; }
            100% { left: 110vw; }
        }

        /* ---- TITLE ---- */
        .title-container {
            z-index: 10;
            text-align: center;
            margin-top: 8vh;
            padding: 0 20px;
        }

        .title {
            font-size: clamp(2rem, 8vw, 4.5rem);
            color: #D32F2F;
            text-shadow:
                3px 3px 0 #FFD700,
                -1px -1px 0 #FFD700,
                1px -1px 0 #FFD700,
                -1px 1px 0 #FFD700;
            animation: bounce-title 1s ease-in-out infinite alternate;
            line-height: 1.2;
        }

        .subtitle {
            font-size: clamp(1.2rem, 4vw, 2.5rem);
            color: #1565C0;
            margin-top: 10px;
            text-shadow: 2px 2px 0 rgba(255,255,255,0.5);
            animation: bounce-title 1.2s ease-in-out infinite alternate;
        }

        @keyframes bounce-title {
            0%   { transform: translateY(0) scale(1); }
            100% { transform: translateY(-10px) scale(1.03); }
        }

        /* ---- SURPRISE BUTTON ---- */
        .surprise-btn {
            z-index: 10;
            margin-top: 5vh;
            padding: 25px 50px;
            font-size: clamp(1.3rem, 5vw, 2.2rem);
            font-family: inherit;
            border: none;
            border-radius: 50px;
            background: linear-gradient(145deg, #FF6F00, #FF8F00, #FFD600);
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            cursor: pointer;
            box-shadow:
                0 8px 25px rgba(255, 111, 0, 0.4),
                0 0 40px rgba(255, 214, 0, 0.3),
                inset 0 -4px 8px rgba(0,0,0,0.1);
            animation: pulse-btn 1.5s ease-in-out infinite;
            transition: transform 0.2s;
            -webkit-tap-highlight-color: transparent;
        }

        .surprise-btn:hover { transform: scale(1.08); }
        .surprise-btn:active { transform: scale(0.95); }

        @keyframes pulse-btn {
            0%, 100% { box-shadow: 0 8px 25px rgba(255,111,0,0.4), 0 0 40px rgba(255,214,0,0.3); }
            50%      { box-shadow: 0 8px 35px rgba(255,111,0,0.6), 0 0 60px rgba(255,214,0,0.5); }
        }

        .surprise-btn.hidden {
            animation: shrink-out 0.5s forwards;
            pointer-events: none;
        }

        @keyframes shrink-out {
            to { transform: scale(0) rotate(360deg); opacity: 0; }
        }

        /* ---- VOUCHER ---- */
        .voucher-container {
            z-index: 10;
            display: none;
            flex-direction: column;
            align-items: center;
            margin-top: 3vh;
            padding: 0 20px;
        }

        .voucher-container.revealed {
            display: flex;
            animation: voucher-reveal 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes voucher-reveal {
            0%  { transform: scale(0) rotate(-10deg); opacity: 0; }
            60% { transform: scale(1.1) rotate(3deg); }
            100%{ transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .voucher-frame {
            background: linear-gradient(145deg, #FFD700, #FFA000, #FFD700);
            padding: 12px;
            border-radius: 20px;
            box-shadow:
                0 10px 40px rgba(0,0,0,0.2),
                0 0 60px rgba(255, 215, 0, 0.4),
                inset 0 0 20px rgba(255,255,255,0.3);
            animation: glow-frame 2s ease-in-out infinite alternate;
        }

        @keyframes glow-frame {
            0%   { box-shadow: 0 10px 40px rgba(0,0,0,0.2), 0 0 60px rgba(255,215,0,0.4); }
            100% { box-shadow: 0 10px 40px rgba(0,0,0,0.2), 0 0 100px rgba(255,215,0,0.7); }
        }

        .voucher-frame img {
            display: block;
            max-width: min(85vw, 500px);
            border-radius: 12px;
        }

        .reveal-text {
            font-size: clamp(1.5rem, 6vw, 3rem);
            color: #D32F2F;
            text-shadow: 2px 2px 0 #FFD700, -1px -1px 0 #FFD700;
            margin-top: 20px;
            text-align: center;
            animation: bounce-title 1s ease-in-out infinite alternate;
        }

        /* ---- CONFETTI ---- */
        .confetti {
            position: fixed;
            z-index: 100;
            pointer-events: none;
        }

        @keyframes confetti-fall {
            0%   { transform: translateY(0) rotate(0deg) scale(1); opacity: 1; }
            100% { transform: translateY(105vh) rotate(720deg) scale(0.5); opacity: 0; }
        }

        @keyframes confetti-burst {
            0%   { transform: translate(0, 0) rotate(0deg); opacity: 1; }
            100% { transform: translate(var(--x), var(--y)) rotate(720deg); opacity: 0; }
        }

        /* ---- BALLOONS ---- */
        .balloon {
            position: fixed;
            bottom: -100px;
            z-index: 5;
            font-size: clamp(2rem, 8vw, 4rem);
            pointer-events: none;
        }

        @keyframes float-up {
            0%  { transform: translateY(0) rotate(0deg); opacity: 1; }
            80% { opacity: 1; }
            100%{ transform: translateY(-120vh) rotate(15deg); opacity: 0; }
        }

        /* ---- TRAIN ---- */
        .train-container {
            position: fixed;
            bottom: 18px;
            left: -350px;
            z-index: 50;
            display: none;
            align-items: flex-end;
        }

        .train-container.active {
            display: flex;
            animation: train-cross 6s linear forwards;
        }

        .train {
            font-size: clamp(2.5rem, 10vw, 5rem);
            line-height: 1;
            white-space: nowrap;
        }

        .steam-puffs {
            position: absolute;
            top: -15px;
            left: 5px;
        }

        .steam-puff {
            position: absolute;
            font-size: 1.3rem;
            opacity: 0;
            animation: puff-rise 1s ease-out infinite;
        }
        .steam-puff:nth-child(1) { animation-delay: 0s; }
        .steam-puff:nth-child(2) { animation-delay: 0.3s; left: -8px; }
        .steam-puff:nth-child(3) { animation-delay: 0.6s; left: -16px; }

        @keyframes puff-rise {
            0%   { transform: translateY(0) scale(0.5); opacity: 0.7; }
            100% { transform: translateY(-40px) scale(1.5); opacity: 0; }
        }

        @keyframes train-cross {
            0%   { left: -350px; }
            100% { left: 110vw; }
        }

        .track {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 16px;
            background:
                repeating-linear-gradient(90deg, #5D4037 0px, #5D4037 4px, transparent 4px, transparent 30px),
                linear-gradient(0deg, #795548, #795548);
            background-size: 30px 8px, 100% 16px;
            background-position: 0 bottom, 0 bottom;
            background-repeat: repeat-x;
            border-top: 3px solid #8D6E63;
            z-index: 45;
            display: none;
        }

        .track.active { display: block; }

        /* ---- SPARKLE STARS ---- */
        .sparkle-star {
            position: fixed;
            z-index: 90;
            pointer-events: none;
            font-size: 2rem;
            animation: star-spin 1s ease-out forwards;
        }

        @keyframes star-spin {
            0%  { transform: scale(0) rotate(0); opacity: 1; }
            50% { transform: scale(1.5) rotate(180deg); opacity: 1; }
            100%{ transform: scale(0) rotate(360deg); opacity: 0; }
        }
    </style>
</head>
<body>

    <!-- Clouds -->
    <div class="cloud cloud-1"></div>
    <div class="cloud cloud-2"></div>
    <div class="cloud cloud-3"></div>

    <!-- Title -->
    <div class="title-container">
        <h1 class="title">Happy Birthday Charlie!</h1>
        <p class="subtitle">You're 3 today! üéÇ</p>
    </div>

    <!-- Surprise Button -->
    <button class="surprise-btn" id="surpriseBtn">
        üéÅ Tap for your surprise! üéÅ
    </button>

    <!-- Voucher (hidden initially) -->
    <div class="voucher-container" id="voucherContainer">
        <div class="voucher-frame">
            <img src="voucher.png" alt="Thomas Land Voucher">
        </div>
        <p class="reveal-text">You're going to Thomas Land! üöÇ</p>
    </div>

    <!-- Train track and train -->
    <div class="track" id="track"></div>
    <div class="train-container" id="trainContainer">
        <div class="steam-puffs">
            <span class="steam-puff">üí®</span>
            <span class="steam-puff">üí®</span>
            <span class="steam-puff">üí®</span>
        </div>
        <div class="train">üöÇüöÉüöÉ</div>
    </div>

    <script>
        const surpriseBtn = document.getElementById('surpriseBtn');
        const voucherContainer = document.getElementById('voucherContainer');
        const trainContainer = document.getElementById('trainContainer');
        const track = document.getElementById('track');
        let revealed = false;

        surpriseBtn.addEventListener('click', () => {
            if (revealed) return;
            revealed = true;

            // Hide button with spin-shrink animation
            surpriseBtn.classList.add('hidden');

            setTimeout(() => {
                surpriseBtn.style.display = 'none';

                // Reveal the voucher
                voucherContainer.classList.add('revealed');

                // Confetti bursts and rain
                createConfettiBurst();
                setTimeout(() => createConfettiRain(), 300);
                setTimeout(() => createConfettiRain(), 900);
                setTimeout(() => createConfettiBurst(), 1500);
                setTimeout(() => createConfettiRain(), 2200);

                // Balloons
                launchBalloons();

                // Train
                setTimeout(() => {
                    track.classList.add('active');
                    trainContainer.classList.add('active');
                }, 800);

                // Send a second train later
                setTimeout(() => {
                    const train2 = trainContainer.cloneNode(true);
                    train2.querySelector('.train').textContent = 'üöÇüöÉüöÉüöÉ';
                    train2.classList.add('active');
                    train2.style.animationDuration = '8s';
                    document.body.appendChild(train2);
                    setTimeout(() => train2.remove(), 9000);
                }, 5000);

                // Sparkle stars around voucher
                setTimeout(() => spawnStars(), 400);
                setTimeout(() => spawnStars(), 1000);
                setTimeout(() => spawnStars(), 1600);
                setTimeout(() => spawnStars(), 2400);

                // Sounds
                playTrainWhistle();
                setTimeout(() => playCheerfulMelody(), 400);
                setTimeout(() => playChooChoo(), 2800);
                setTimeout(() => playTrainWhistle(), 4500);
            }, 500);
        });

        /* ======== CONFETTI ======== */
        const CONFETTI_COLORS = ['#FF0000','#FF6F00','#FFD600','#4CAF50','#2196F3','#9C27B0','#E91E63','#00BCD4','#FF4081','#00E676'];

        function createConfettiBurst() {
            const cx = window.innerWidth / 2;
            const cy = window.innerHeight / 3;

            for (let i = 0; i < 70; i++) {
                const el = document.createElement('div');
                el.className = 'confetti';

                const angle = (Math.PI * 2 * i) / 70 + (Math.random() - 0.5) * 0.3;
                const dist = 80 + Math.random() * 350;
                const x = Math.cos(angle) * dist;
                const y = Math.sin(angle) * dist - 150;
                const size = 6 + Math.random() * 10;

                el.style.cssText = `
                    left:${cx}px; top:${cy}px;
                    width:${size}px; height:${size}px;
                    background:${CONFETTI_COLORS[Math.floor(Math.random()*CONFETTI_COLORS.length)]};
                    border-radius:${Math.random()>0.5?'50%':'2px'};
                    --x:${x}px; --y:${y}px;
                    animation:confetti-burst ${1+Math.random()*1.5}s cubic-bezier(.25,.46,.45,.94) forwards;
                    animation-delay:${Math.random()*0.15}s;
                `;
                document.body.appendChild(el);
                setTimeout(() => el.remove(), 3000);
            }
        }

        function createConfettiRain() {
            for (let i = 0; i < 45; i++) {
                const el = document.createElement('div');
                el.className = 'confetti';
                const size = 5 + Math.random() * 10;

                el.style.cssText = `
                    left:${Math.random()*100}vw; top:-20px;
                    width:${size}px; height:${size}px;
                    background:${CONFETTI_COLORS[Math.floor(Math.random()*CONFETTI_COLORS.length)]};
                    border-radius:${Math.random()>0.5?'50%':'2px'};
                    animation:confetti-fall ${2+Math.random()*3}s linear forwards;
                    animation-delay:${Math.random()*0.8}s;
                `;
                document.body.appendChild(el);
                setTimeout(() => el.remove(), 6000);
            }
        }

        /* ======== BALLOONS ======== */
        function launchBalloons() {
            const emojis = ['üéà','üéà','üéà','üéÅ','‚≠ê','üéâ','üéà','üéà'];
            for (let i = 0; i < 18; i++) {
                setTimeout(() => {
                    const b = document.createElement('div');
                    b.className = 'balloon';
                    b.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                    b.style.left = `${3 + Math.random() * 94}vw`;
                    b.style.animation = `float-up ${4 + Math.random() * 4}s ease-out forwards`;
                    document.body.appendChild(b);
                    setTimeout(() => b.remove(), 9000);
                }, i * 250);
            }
        }

        /* ======== SPARKLE STARS ======== */
        function spawnStars() {
            const rect = voucherContainer.getBoundingClientRect();
            const icons = ['‚≠ê','‚ú®','üåü','üí´'];
            for (let i = 0; i < 10; i++) {
                const s = document.createElement('div');
                s.className = 'sparkle-star';
                s.textContent = icons[Math.floor(Math.random() * icons.length)];
                s.style.left = `${rect.left - 20 + Math.random() * (rect.width + 40)}px`;
                s.style.top = `${rect.top - 20 + Math.random() * (rect.height + 40)}px`;
                s.style.animationDelay = `${Math.random() * 0.5}s`;
                document.body.appendChild(s);
                setTimeout(() => s.remove(), 2000);
            }
        }

        /* ======== WEB AUDIO API SOUNDS ======== */

        function getAudioCtx() {
            return new (window.AudioContext || window.webkitAudioContext)();
        }

        function playTrainWhistle() {
            try {
                const ctx = getAudioCtx();
                const t = ctx.currentTime;

                // Two-tone steam whistle
                [0, 0.45].forEach((offset, idx) => {
                    const osc1 = ctx.createOscillator();
                    const osc2 = ctx.createOscillator();
                    const gain = ctx.createGain();

                    osc1.type = 'sine';
                    osc2.type = 'sine';

                    const base = idx === 0 ? 880 : 830;
                    osc1.frequency.setValueAtTime(base, t + offset);
                    osc1.frequency.linearRampToValueAtTime(base * 0.75, t + offset + 0.5);

                    osc2.frequency.setValueAtTime(base * 1.25, t + offset);
                    osc2.frequency.linearRampToValueAtTime(base * 0.95, t + offset + 0.5);

                    gain.gain.setValueAtTime(0, t + offset);
                    gain.gain.linearRampToValueAtTime(0.12, t + offset + 0.04);
                    gain.gain.setValueAtTime(0.12, t + offset + 0.35);
                    gain.gain.linearRampToValueAtTime(0, t + offset + 0.55);

                    osc1.connect(gain);
                    osc2.connect(gain);
                    gain.connect(ctx.destination);

                    osc1.start(t + offset);
                    osc2.start(t + offset);
                    osc1.stop(t + offset + 0.6);
                    osc2.stop(t + offset + 0.6);
                });
            } catch (e) { /* Audio not supported */ }
        }

        function playChooChoo() {
            try {
                const ctx = getAudioCtx();
                const t = ctx.currentTime;

                for (let i = 0; i < 4; i++) {
                    const osc = ctx.createOscillator();
                    const gain = ctx.createGain();
                    const start = t + i * 0.22;

                    osc.type = 'sawtooth';
                    osc.frequency.setValueAtTime(220, start);
                    osc.frequency.linearRampToValueAtTime(140, start + 0.1);

                    gain.gain.setValueAtTime(0, start);
                    gain.gain.linearRampToValueAtTime(0.08, start + 0.02);
                    gain.gain.setValueAtTime(0.08, start + 0.08);
                    gain.gain.linearRampToValueAtTime(0, start + 0.15);

                    osc.connect(gain);
                    gain.connect(ctx.destination);
                    osc.start(start);
                    osc.stop(start + 0.2);
                }
            } catch (e) { /* Audio not supported */ }
        }

        function playCheerfulMelody() {
            try {
                const ctx = getAudioCtx();

                // Cheerful ascending melody with a bouncy rhythm
                const notes = [
                    { f: 523, d: 0.15 },   // C5
                    { f: 587, d: 0.15 },   // D5
                    { f: 659, d: 0.15 },   // E5
                    { f: 698, d: 0.15 },   // F5
                    { f: 784, d: 0.30 },   // G5 (hold)
                    { f: 0,   d: 0.08 },   // rest
                    { f: 784, d: 0.12 },   // G5
                    { f: 880, d: 0.15 },   // A5
                    { f: 784, d: 0.15 },   // G5
                    { f: 698, d: 0.15 },   // F5
                    { f: 659, d: 0.30 },   // E5 (hold)
                    { f: 0,   d: 0.08 },   // rest
                    { f: 659, d: 0.12 },   // E5
                    { f: 784, d: 0.15 },   // G5
                    { f: 880, d: 0.15 },   // A5
                    { f: 988, d: 0.15 },   // B5
                    { f: 1047, d: 0.50 },  // C6 (big finish)
                ];

                let time = ctx.currentTime;

                notes.forEach(note => {
                    if (note.f === 0) {
                        time += note.d;
                        return;
                    }

                    const osc = ctx.createOscillator();
                    const gain = ctx.createGain();

                    osc.type = 'triangle';
                    osc.frequency.value = note.f;

                    gain.gain.setValueAtTime(0, time);
                    gain.gain.linearRampToValueAtTime(0.14, time + 0.02);
                    gain.gain.setValueAtTime(0.14, time + note.d * 0.65);
                    gain.gain.linearRampToValueAtTime(0, time + note.d);

                    osc.connect(gain);
                    gain.connect(ctx.destination);

                    osc.start(time);
                    osc.stop(time + note.d + 0.01);

                    time += note.d;
                });
            } catch (e) { /* Audio not supported */ }
        }
    </script>
</body>
</html>
